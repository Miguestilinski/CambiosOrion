<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios Orion</title>
    <link rel="stylesheet" href="https://cambiosorion.cl/orionapp/public/styles/header.css">
    <link rel="stylesheet" href="https://cambiosorion.cl/orionapp/public/styles/index.css">
    <link rel="stylesheet" href="https://cambiosorion.cl/orionapp/public/styles/footer.css">
    <link href="https://cambiosorion.cl/orionapp/public/styles/output.css" rel="stylesheet">
    <link rel="icon" href="https://cambiosorion.cl/orionapp/icons/IsotipoOrion-blue.svg" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/fetch/3.6.2/fetch.min.js"></script>
    <header>
        <!-- Logo y Nombre -->
        <div class="header-logo">
            <a href="https://cambiosorion.cl/">
                <img src="/orionapp/assets/LogoOrion-white.svg" alt="Logo Cambios Orion" class="logo">
            </a>
 
        </div>
    
        <!-- Botones para versión móvil -->
        <div class="mobile-buttons">
            <button class="menu-button" id="nav-menu-button">
                <img src="/orionapp/icons/menu-white.svg" alt="Menú">
            </button>
            <button class="menu-button" id="session-menu-button">
                <img src="/orionapp/icons/profile-white.png" alt="Sesión">
            </button>
        </div>
    
        <!-- Menús desplegables para móvil -->
        <div id="nav-mobile-menu" class="mobile-menu hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44">
            <ul class="py-2 text-sm text-gray-700">
                <li><a href="index" class="block px-4 py-2 hover:bg-gray-100">Inicio</a></li>
            </ul>
            <ul class="py-2 text-sm text-gray-700">
                <li><a href="nosotros" class="block px-4 py-2 hover:bg-gray-100">Nosotros</a></li>
            </ul>
            <ul class="py-2 text-sm text-gray-700">
                <li><a href="contacto" class="block px-4 py-2 hover:bg-gray-100">Contacto</a></li>
            </ul>
        </div>
    
        <div class="mobile-menu hidden bg-white rounded-lg shadow w-44" id="session-mobile-menu">
            <div id="guest-actions-mobile" class="divide-y divide-gray-100" style="display:none;">
                <ul class="py-2 text-sm text-gray-700">
                    <li><a href="#login" class="block px-4 py-2 hover:bg-gray-100">Iniciar Sesión</a></li>
                </ul>
                <ul class="py-2 text-sm text-gray-700">
                    <li><a href="#registro" class="block px-4 py-2 hover:bg-gray-100">Registro</a></li>
                </ul>
            </div>
            <div id="user-actions-mobile" class="divide-y divide-gray-100" style="display:none;">
                <div class="px-2 py-2 text-sm text-gray-900">
                    <div id="user-name">Nombre del usuario</div>
                    <div id="user-email" class="mail font-medium truncate">Correo del usuario</div>
                </div>
                <ul class="py-2 text-sm text-gray-700">
                    <li><a href="https://clientes.cambiosorion.cl/" class="block px-4 py-2 hover:bg-gray-100">Mi perfil</a></li>
                </ul>
                <ul class="py-2 text-sm text-gray-700" id="menu-admin" style="display: none;">
                    <li><a href="https://admin.cambiosorion.cl/" class="block px-4 py-2 hover:bg-gray-100">Portal Admin</a></li>
                </ul>
                <ul class="py-2 text-sm text-gray-700">
                    <li><a href="#" class="block px-4 py-2 hover:bg-gray-100" id="logout-button-mobile">Cerrar sesión</a></li>
                </ul>
            </div>
        </div>
    
        <!-- Menú de navegación para escritorio -->
        <nav>
            <ul>
                <li class="selected"><a href="index">Inicio</a></li>
                <li><a href="nosotros">Nosotros</a></li>
                <li><a href="contacto">Contacto</a></li>
            </ul>
        </nav>
    
        <!-- Acciones para escritorio -->
        <div class="header-actions">
            <!-- User actions -->
            <div id="user-actions" style="display:none;">
                <button id="profile-menu-button" class="text-white bg-transparent hover:bg-gray-200 focus:outline-none">
                    <img src="/orionapp/icons/profile-white.png" alt="Profile">
                </button>
                <!-- Menú desplegable -->
                <div id="dropdownInformation" class="hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44">
                    <div class="px-4 py-3 text-sm text-gray-900">
                        <div id="user-name">Nombre del usuario</div>
                        <div id="user-email" class="mail font-medium truncate">Correo del usuario</div>
                    </div>
                    <ul class="py-2 text-sm text-gray-700" id="menu-cliente">
                        <li><a href="https://clientes.cambiosorion.cl/" class="block px-4 py-2 hover:bg-gray-100">Mi perfil</a></li>
                    </ul>
                    <ul class="py-2 text-sm text-gray-700" id="menu-admin" style="display: none;">
                        <li><a href="https://admin.cambiosorion.cl/" class="block px-4 py-2 hover:bg-gray-100">Portal Admin</a></li>
                    </ul>
                    <ul class="py-2 text-sm text-gray-700">
                        <li><a href="#" class="block px-4 py-2 hover:bg-gray-100" id="logout-button">Cerrar sesión</a></li>
                    </ul>
                </div>
            </div>

            <!-- Guest actions -->
            <div id="guest-actions" style="display:none;">
                <a href="#login">Iniciar sesión</a>
                <a href="#registro" class="register-button">Registrarse</a>
            </div>
        </div>
    </header>

    <div class="header-divider"></div>
    <div class="main-content">
        <!-- ===== BANNER (CARRUSEL) ===== -->
        <section id="hero-carousel" class="relative w-full h-[25rem] overflow-hidden">
            <!-- Slides wrapper -->
            <div id="carousel-slides" class="flex flex-nowrap h-full transition-transform duration-700 ease-in-out">
                <!-- Slide 1 -->
                <div class="carousel-slide flex-shrink-0 w-full h-full bg-center bg-cover flex items-center justify-center text-white"
                    style="background-image: url('/orionapp/assets/image1.jpg');">
                    <div class="bg-black/60 p-6 rounded-lg text-center max-w-xl mx-4">
                        <h2 class="text-2xl md:text-4xl font-bold mb-2">Nuestras Divisas</h2>
                        <p class="mb-4">Revisa en tiempo real las tasas de compra y venta de todas nuestras divisas.</p>
                        <a href="https://cambiosorion.cl/divisas" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="bg-white text-black px-4 py-2 rounded-lg font-semibold hover:bg-gray-200">
                            Ver Catálogo
                        </a>
                    </div>
                </div>

                <!-- Slide 2 -->
                <div class="carousel-slide flex-shrink-0 w-full h-full bg-center bg-cover flex items-center justify-center text-white"
                    style="background-image: url('/orionapp/assets/image2.jpg');">
                    <div class="bg-black/60 p-6 rounded-lg text-center max-w-xl mx-4">
                        <h2 class="text-2xl md:text-4xl font-bold mb-2">Reserva tu cambio</h2>
                        <p class="mb-4">Asegura el precio de hoy para tu próxima operación.</p>
                        <a href="#conversor" class="bg-white text-black px-4 py-2 rounded-lg font-semibold hover:bg-gray-200">Reservar</a>
                    </div>
                </div>

                <!-- Slide 3 -->
                <div class="carousel-slide flex-shrink-0 w-full h-full bg-center bg-cover flex items-center justify-center text-white"
                    style="background-image: url('/orionapp/assets/image3.jpg');">
                <div class="bg-black/60 p-6 rounded-lg text-center max-w-xl mx-4">
                    <h2 class="text-2xl md:text-4xl font-bold mb-2">Alertas personalizadas</h2>
                    <p class="mb-4">Recibe notificaciones cuando el tipo de cambio sea el que buscas.</p>
                    <a id="alertaSlideBtn" href="#alerta-wrapper" class="bg-white text-black px-4 py-2 rounded-lg font-semibold hover:bg-gray-200">Crear alerta</a>
                </div>
                </div>
            </div>

            <!-- Controles Prev / Next (z-index alto para que se vean) -->
            <button id="carousel-prev" aria-label="Anterior" class="absolute left-2 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full border-2 border-white bg-black/60 text-white text-2xl cursor-pointer hover:bg-black/70 z-[10000]">
                &#10094;
            </button>
            <button id="carousel-next" aria-label="Siguiente" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center rounded-full border-2 border-white bg-black/60 text-white text-2xl cursor-pointer hover:bg-black/70 z-[10000]">
                &#10095;
            </button>

            <!-- Indicadores (dots) -->
            <div id="carousel-indicators" class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-[10000]">
                <button class="dot w-3 h-3 rounded-full bg-white/60" data-slide="0" aria-label="Slide 1"></button>
                <button class="dot w-3 h-3 rounded-full bg-white/30" data-slide="1" aria-label="Slide 2"></button>
                <button class="dot w-3 h-3 rounded-full bg-white/30" data-slide="2" aria-label="Slide 3"></button>
            </div>
        </section>

        <div id="ticker">
            <div id="ticker-content"></div>
        </div>
        <span id="paridades-date" class="text-white text-sm">
            Paridades Banco Central de Chile (--)
        </span>

        <!-- Conversor de divisas -->
        <section id="conversor" class="max-w-2xl mx-auto my-10 bg-white p-8 mb-12 rounded-xl shadow-lg">
            <h2 class="text-3xl font-extrabold text-[#1e3a8a] text-center mb-6 tracking-wide drop-shadow-md">Cotiza y Reserva</h2>
            <!-- Stepper de Flowbite -->
            <ol class="flex items-center w-full text-sm font-medium text-center text-gray-500 sm:text-base">
                <li id="stepper-1" class="flex-1">1. Cotiza</li>
                <li id="stepper-2" class="flex-1">2. Datos</li>
                <li id="stepper-3" class="flex-1">3. Confirmación</li>
            </ol>

            <!-- Paso 1: Conversor -->
            <div id="step-1" class="mt-6">
                <!-- Switch Compra/Venta -->
                <div id="trade-switch" class="flex justify-between mb-2 text-sm font-medium select-none">
                    <div id="trade-buy" class="flex-1 p-2 text-center border-l border-t border-b rounded-l-md cursor-pointer">
                        Compra: -- CLP
                    </div>
                    <div id="trade-sell" class="flex-1 p-2 text-center border-t border-b border-r rounded-r-md cursor-pointer">
                        Venta: -- CLP
                    </div>
                </div>

                <div id="currency-converter" class="currency-converter flex justify-between">

                    <!-- Columna izquierda -->
                    <div class="converter-box flex-1 relative">
                        <label for="amount1" class="block text-lg font-bold mb-2">¿Qué divisa tienes?</label>
                        <input type="text" id="amount1" placeholder="0.00" min="0"
                            class="w-full p-4 border rounded-lg shadow-md text-right bg-white mb-3 appearance-none"
                            oninput="convertCurrency()">
                        <div id="dropdown1Button" class="currency-selector"
                            onclick="toggleDropdown('dropdown1', event)">
                            <img id="icon-currency1" src="/orionapp/node_modules/circle-flags/flags/cl.svg" alt="Icono divisa" class="w-5 h-5 mr-2">
                            <span id="currency1-text" class="font-medium">CLP</span>
                            <svg class="w-4 h-4 ml-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                            </svg>
                        </div>
                        <div id="dropdown1" class="dropdown-content hidden divide-y divide-gray-100 rounded-lg shadow-md overflow-y-auto">
                            <ul class="py-1 text-sm text-gray-700" aria-labelledby="dropdown1Button">
                                <li onclick="selectCurrency('USD', '/orionapp/node_modules/circle-flags/flags/us.svg', 'currency1', 'dropdown1')">
                                    <a href="#" class="px-2 py-1 hover:bg-gray-100 flex items-center currency-option">
                                        <img src="/orionapp/node_modules/circle-flags/flags/us.svg" alt="Icono USD" class="w-5 h-5 inline-block mr-2"> 
                                        <span>USD</span>
                                    </a>
                                </li>
                                <!-- Agrega más opciones según sea necesario -->
                            </ul>
                        </div>
                    </div>

                    <!-- Flecha entre inputs -->
                    <div class="mx-4 flex flex-col justify-center">
                        <img src="/orionapp/icons/right-arrow.svg" alt="Flecha swap" class="w-6 h-6">
                    </div>

                    <!-- Botón para intercambio -->
                    <button class="swap-button mx-4 p-2 rounded-full hover:bg-white text-black hidden"
                        onclick="swapCurrencies()" aria-label="Intercambiar divisas">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17 10h4m0 0V6m0 4l-4-4m-6 14H7m0 0v-4m0 4l4-4"/>
                        </svg>
                    </button>

                    <!-- Columna derecha -->
                    <div class="converter-box flex-1 relative">
                        <label for="amount2" class="block text-lg font-bold mb-2">¿Qué divisa quieres?</label>
                        <input type="readonly-input" id="amount2" placeholder="0.00" min="0"
                            class="w-full p-4 border rounded-lg shadow-md text-right bg-white mb-3 appearance-none"
                            oninput="convertFromAmount2()">
                        <div id="dropdown2Button" class="currency-selector"
                            onclick="toggleDropdown('dropdown2', event)">
                            <img id="icon-currency2" src="/orionapp/node_modules/circle-flags/flags/us.svg" alt="Icono divisa" class="w-5 h-5 mr-2">
                            <span id="currency2-text" class="font-medium">USD</span>
                            <svg class="w-4 h-4 ml-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                            </svg>
                        </div>
                        
                        <div id="dropdown2" class="dropdown-content hidden divide-y divide-gray-100 rounded-lg shadow-md overflow-y-auto">
                            <ul class="py-1 text-sm text-gray-700" aria-labelledby="dropdown2Button">
                                <li onclick="selectCurrency('CLP', '/orionapp/node_modules/circle-flags/flags/cl.svg', 'currency2', 'dropdown2')">
                                    <a href="#" class="px-2 py-1 hover:bg-gray-100 flex items-center currency-option">
                                        <img src="/orionapp/node_modules/circle-flags/flags/cl.svg" alt="Icono USD" class="w-5 h-5 inline-block mr-2"> 
                                        <span>CLP</span>
                                    </a>
                                </li>
                                <!-- Agrega más opciones según sea necesario -->
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Texto dinámico de compra/venta -->
                <div id="trade-info" class="mb-4 text-center font-semibold text-md text-gray-700 hidden">
                    Estás comprando USD
                </div>
                <!-- Texto dinámico de precio -->
                <div id="trade-price" class="text-center text-gray-600 text-sm hidden">
                    Precio: --
                </div>
            </div>

            <!-- Paso 2: Formulario de reserva -->
            <div id="step-2" class="mt-6 hidden">
                <form id="formReserva">
                    <label class="block mb-2 font-semibold">Nombre:</label>
                    <input id="reserva-nombre" type="text" name="nombre" class="w-full border rounded p-2 mb-4" placeholder="Ingresa tu nombre">

                    <label class="block mb-2 font-semibold">Email:</label>
                    <input id="reserva-email" type="email" name="email" class="w-full border rounded p-2 mb-4" placeholder="ejemplo@correo.com">

                    <!-- Teléfono solo si > 5000 USD -->
                    <div id="telefono-container" class="hidden">
                        <label class="block mb-2">Teléfono:</label>
                        <input id="reserva-fono" type="tel" class="w-full border rounded p-2 mb-4" placeholder="+56 9 1234 5678">
                    </div>
                </form>
            </div>

            <!-- Paso 3: Confirmación / Resumen -->
            <div id="step-3" class="mt-6 hidden">
                <h2 class="text-lg font-semibold mb-4">Resumen de tu reserva</h2>
                
                <!-- Contenedor en dos columnas -->
                <div id="reservation-summary" class="mb-4 p-4 border rounded bg-gray-50 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Columna Datos Personales -->
                    <div>
                        <p><strong>Día Reserva:</strong> <span id="summary-date">--</span></p>
                        <p><strong>Hora Reserva:</strong> <span id="summary-time">--</span></p>
                        <p><strong>Nombre:</strong> <span id="summary-name">--</span></p>
                        <p><strong>Correo:</strong> <span id="summary-email">--</span></p>
                        <p id="summary-phone-container" class="hidden"><strong>Teléfono:</strong> <span id="summary-phone">--</span></p>
                    </div>

                    <!-- Columna Operación -->
                    <div>
                        <p><strong>Operación:</strong> <span id="summary-operation">--</span></p>
                        <p class="flex"><strong>Divisa:</strong> <span id="summary-currency-name" class="flex ml-1">--</span></p>
                        <p><strong>Pagas:</strong> <span id="summary-pay">--</span></p>
                        <p><strong>Obtendrás:</strong> <span id="summary-get">--</span></p>
                        <p><strong>Precio:</strong> <span id="summary-price">--</span></p>
                    </div>
                </div>

                <!-- Instrucciones importantes -->
                <div id="reservation-instructions" class="bg-yellow-100/60 p-4 text-sm rounded-lg border border-yellow-400 mb-4">
                    <p class="font-semibold">📍 Lugar de atención:</p>
                    <p>Cambios Orion - Agustinas 1035, Oficina 13</p>

                    <p class="mt-2 font-semibold">🕒 Horario de atención:</p>
                    <p>Lunes a Viernes de <strong>09:00 a 17:00 hrs</strong>.</p>

                    <p class="mt-2">⚠️ La reserva es <strong>válida solo hasta el cierre del día</strong>. 
                    A las 17:00 hrs deja de ser válida, y al día hábil siguiente deberás generar una nueva, 
                    ya que los precios pueden cambiar.</p>

                    <p class="mt-2">📧 Recibirás un correo con un código QR que deberás mostrar en el local para hacer efectiva la operación.</p>
                </div>

                <!-- Botón Confirmar -->
                <div class="flex justify-center">
                    <button id="confirmReservation" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg shadow disabled:opacity-50" disabled>
                        Confirmar Reserva
                    </button>

                    <!-- 🔑 Botón nuevo (oculto al inicio) -->
                    <button id="contactExecutive" class="hidden bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg shadow">
                        Contactar con un ejecutivo
                    </button>
                </div>

                <p id="reservation-status" class="mt-2 text-center text-sm text-gray-600"></p>
            </div>

            <!-- Mensaje de validación -->
            <p id="conversor-stepper-error" class="text-red-600 text-sm mb-2 text-center hidden"></p>

            <!-- Botones de navegación -->
            <div id="stepperButtons" class="flex justify-center mt-6">
                <button id="prevStep" class="bg-gray-300 px-4 py-2 rounded-lg hover:text-white hidden">Anterior</button>
                <button id="nextStep" class="bg-[#1e3a8a] hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow">Reservar</button>
            </div>

            <span id="last-updated1" class="date-converter text-white text-xs">
                Última actualización: --
            </span>
        </section>

        <!-- Herramientas Rapidas -->
        <section id="quick-tools" class="bg-transparent w-full p-8">
            <h2 class="text-3xl font-extrabold text-white text-center mb-1 tracking-wide drop-shadow-md">
                Herramientas rápidas
            </h2>
            <p class="text-center text-white mb-8 text-sm italic max-w-md mx-auto">
                Accede rápido a las funciones que facilitan tu experiencia en Cambios Orion.
            </p>
            <div class="max-w-2xl mx-auto px-6">

                <!-- Catálogo de Divisas (ancho completo arriba) -->
                <a href="https://cambiosorion.cl/divisas" 
                    target="_blank"
                    rel="noopener noreferrer"
                    class="block bg-gradient-to-r from-[#1e3a8a] to-[#3b82f6] p-7 rounded-2xl shadow-2xl hover:shadow-[0_8px_30px_rgb(59,130,246,0.4)] transition-transform duration-300 hover:-translate-y-1 mb-10 text-center text-xl font-semibold text-white flex items-center justify-center gap-3 select-none">
                <!-- Ícono pequeño al lado izquierdo, opcional -->
                <span class="inline-block mr-2 text-xl align-middle">📊</span>
                Catálogo de Divisas
                </a>

                <!-- Contenedor para Reserva y Alerta lado a lado -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-12">

                    <a href="#conversor"
                        class="flex items-center justify-center bg-[#1e3a8a] p-6 rounded-xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition duration-300 text-lg font-semibold text-white cursor-pointer">
                        <!-- Opcional ícono pequeño -->
                        <span class="inline-block mr-2 text-xl">📅</span>
                        Reserva
                    </a>

                    <a id="alertaBtn"
                        class="flex items-center justify-center bg-[#1e3a8a] p-6 rounded-xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition duration-300 text-lg font-semibold text-white cursor-pointer">
                        <!-- Opcional ícono pequeño -->
                        <span class="inline-block mr-2 text-xl">🔔</span>
                        Alerta de Precio
                    </a>

                </div>
            </div>
        </section>

        <div id="alerta-wrapper" class="overflow-hidden max-h-0 transition-all duration-500 ease-in-out bg-white shadow-lg w-full">
            <!-- Contenedor de formulario de alerta -->
            <div id="alerta-section" class="max-w-2xl mx-auto p-8">
                <h2 class="text-2xl text-center font-bold mb-2 text-[#1e3a8a]">
                    Configura tu Alerta de Precio
                </h2>
                <p class="text-center text-gray-600 mb-6 italic text-sm">
                    Selecciona la divisa, el tipo de condición y tus datos para recibir notificaciones cuando el precio cambie.
                </p>

                <!-- Stepper -->
                <ol class="flex items-center w-full text-sm font-medium text-center text-gray-500 sm:text-base mb-6">
                    <li id="alerta-stepper-1" class="flex-1">1. Divisa</li>
                    <li id="alerta-stepper-2" class="flex-1">2. Condición</li>
                    <li id="alerta-stepper-3" class="flex-1">3. Datos</li>
                </ol>

                <!-- Paso 1 -->
                <div id="alerta-step-1" class="step-content flex flex-col gap-4 items-center">
                    <!-- Selector de divisa estilo conversor -->
                    <div id="alerta-divisa-container" class="relative flex-shrink-0 w-[200px] mr-14 ml-14">
                        <div id="alerta-divisa-button"
                            class="currency-selector flex items-center justify-between px-3 py-2 bg-white rounded text-sm cursor-pointer w-full"
                            onclick="showAlertaDropdown()">
                            <img id="alerta-icon" src="" alt="Icono divisa" class="w-5 h-5 mr-2 hidden">
                            <span id="alerta-currency-text" class="font-medium truncate">Selecciona una Divisa</span>
                            <svg class="w-4 h-4 ml-2 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
                            </svg>
                        </div>

                        <!-- Dropdown -->
                        <div id="alerta-divisa-dropdown"
                            class="hidden absolute top-full left-1/2 mt-1 bg-white rounded-lg shadow-md z-[9999] w-[100px] max-h-[150px] overflow-y-auto">
                            <ul class="m-0 p-0 list-none"></ul>
                        </div>
                    </div>

                    <!-- Card de compra/venta a la derecha -->
                    <div id="alerta-precios-card" class="hidden p-4 flex-1"></div>
                </div>

                <!-- Paso 2 -->
                <div id="alerta-step-2" class="step-content hidden">
                    <p id="alerta-step-2-summary" class="text-sm text-gray-700 mb-4"></p>
                    
                    <label class="block mb-2 font-semibold">Tipo de condición</label>
                    <select id="alerta-condicion" class="w-full border rounded p-2 mb-1">
                        <option value="alcanza">Alcanza el precio</option>
                        <option value="sube">Precio sube sobre</option>
                        <option value="baja">Precio baja a</option>
                        <option value="cambio_sobre">Cambio sobre %</option>
                        <option value="cambio_bajo">Cambio por debajo %</option>
                        <option value="cambio_24h_sube">Cambio en 24h sobre %</option>
                        <option value="cambio_24h_baja">Cambio en 24h por debajo %</option>
                    </select>
                    <!-- Texto de ayuda dinámico -->
                    <p id="alerta-condicion-help" class="text-xs text-gray-500 italic mb-4"></p>

                    <label class="block mb-2 font-semibold">Valor objetivo</label>
                    <input id="alerta-valor" type="number" step="0.01" class="w-full border rounded p-2 mb-4" placeholder="Ej: 950">
                </div>

                <!-- Paso 3 -->
                <div id="alerta-step-3" class="step-content hidden">
                    <p id="alerta-step-3-summary" class="text-sm text-gray-700 mb-4"></p>
                
                    <label class="block mb-2 font-semibold">Nombre: </label>
                    <input id="alerta-nombre" type="text" class="w-full border rounded p-2 mb-4" placeholder="Ingresa tu nombre">

                    <label class="block mb-2 font-semibold">Email: </label>
                    <input id="alerta-email" type="email" class="w-full border rounded p-2 mb-4" placeholder="ejemplo@correo.com">

                    <p id="alerta-status" class="mt-3 text-center text-sm text-gray-600"></p>
                </div>

                <!-- Mensaje de validación -->
                <p id="alerta-stepper-error" class="text-red-600 text-sm mb-2 text-center hidden"></p>

                <!-- Botones Stepper -->
                <div id="alerta-stepper-buttons" class="flex justify-between items-center mt-6">
                    <button id="alerta-prev" class="bg-gray-300 px-4 py-2 rounded-lg hover:bg-gray-400 text-black hidden">
                        Anterior
                    </button>

                    <div class="flex gap-2">
                        <button id="alerta-next" class="bg-[#1e3a8a] text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow hidden">
                            Siguiente
                        </button>
                        <button id="guardar-alerta" class="bg-[#1e3a8a] hover:bg-blue-700 text-white px-6 py-2 rounded-lg shadow hidden">
                            Crear Alerta
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Envío de Dinero -->
        <section id="sending-money" class="sending-money-section bg-white w-full shadow-lg p-8 hidden">
            <div class="sending-money-container">
                <!-- Mitad con Imagen -->
                <div class="sending-money-image">
                    <img src="/orionapp/assets/image1.jpg" alt="Imagen de Envío de Dinero" class="w-full h-full object-cover rounded-l-lg">
                </div>
                <!-- Mitad con Texto -->
                <div class="sending-money-content">
                    <h2 class="text-2xl font-semibold mb-2">Envío de Dinero</h2>
                    <p class="mb-6 text-gray-200">Envía dinero de manera rápida y segura a tus seres queridos o para tus necesidades financieras.</p>
                    <a href="#" class="sending-money-button">Enviar Ahora</a>
                </div>
            </div>
        </section>

        <!-- Tabla de comparación divisas -->
        <section class="max-w-4xl mx-auto my-10 rounded-xl shadow-lg p-8 relative">
            <h2 class="text-2xl font-bold mb-2 text-white text-center drop-shadow-lg">Comparación de Precios de Divisas</h2>
            <p class="mb-6 text-white text-center text-sm max-w-xl mx-auto italic drop-shadow-sm">
                Compara los precios de compra y venta actuales con los valores al cierre del último día hábil. 
                Mantente informado sobre las variaciones en tiempo real para tomar decisiones más acertadas.
            </p>

            <!-- Toggle para dispositivos móviles -->
            <div id="mobile-toggle" class="flex justify-center items-center md:hidden">
                <label class="relative inline-flex items-center cursor-pointer">
                <span class="mr-3 text-sm font-medium text-white">Compra</span>
                <input type="checkbox" id="toggle-switch" value="" class="sr-only peer" onchange="toggleTableColumns()">
                <div class="relative w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-600"></div>
                <span class="ml-3 text-sm font-medium text-white">Venta</span>
                </label>
            </div>  
            <!-- Botón "Editar" fuera de la tabla -->
            <button onclick="toggleEditMode()" class="edit-btn absolute right-4 text-[#1e3a8a] rounded-md px-3 py-1 font-semibold shadow hover:text-white transition">
                Editar
            </button>
            <table class="content-table w-full mt-12">
                <thead class="text-sm uppercase text-white">
                    <tr>
                        <th scope="col" class="px-6 py-3"></th>
                        <th scope="col" class="px-6 py-3 compra-col">Compra Actual (CLP)</th>
                        <th scope="col" class="px-6 py-3 compra-col">Variación 24hrs (%)</th>
                        <th scope="col" class="px-6 py-3 venta-col hidden">Venta Actual (CLP)</th>
                        <th scope="col" class="px-6 py-3 venta-col hidden">Variación 24hrs (%)</th>
                        <th scope="col" class="px-6 py-3 edit-column hidden"></th>
                    </tr>
                </thead>
                <tbody id="currency-table-body">
                    <!-- Skeleton loading -->
                </tbody>
            </table>
            <div class="flex justify-between items-center mb-4">
                <div class="relative">
                    <!-- El botón "Agregar Divisa" ahora es el único elemento aquí -->
                    <button onclick="toggleDropdown('add-currency-dropdown', event)" 
                            class="add-currency-btn flex items-center space-x-2 text-[#1e3a8a] font-semibold hover:text-[#3b82f6] transition">
                        <span class="add-icon">+</span> <span>Agregar Divisa</span>
                    </button>
                    <div id="add-currency-dropdown" class="dropdown-content hidden divide-y divide-gray-100 rounded-lg shadow-md overflow-y-auto">
                        <!-- Opciones de divisas a agregar se llenarán dinámicamente -->
                    </div>
                </div>
            </div>
            <span id="last-updated2" class="absolute bottom-2 right-2 text-white text-xs">
                Última actualización: --
            </span>                
        </section>
        <!-- Botón flotante de WhatsApp -->
        <a href="https://wa.me/+56971846048?text=Hola,%20necesito%20consultar%20con%20un%20ejecutivo." 
        class="fab fixed text-white rounded-full p-4 shadow-lg transition-all">
            <img src="https://cambiosorion.cl/orionapp/icons/whatsapp-white.png" alt="WhatsApp" class="w-10 h-10">
        </a>
    </div>
    
    <footer>
      <div class="footer-container">
          <!-- Sección del logo -->
          <div class="footer-logo">
              <img src="/orionapp/assets/LogoOrion-white.svg" alt="Logo Orion" class="logo">
               
          </div>
          <!-- Mapa de navegación -->
          <div class="footer-navigation flex justify-between">
              <div class="nav-section">
                  <h3 class="font-bold text-lg">Servicios</h3>
                    <ul class="list-none p-0">
                        <li><a href="https://cambiosorion.cl/divisas" class="block py-1">Divisas</a></li>
                        <li><a href="#conversor" class="block py-1">Reservar</a></li>
                        <li><a href="#alerta-wrapper" class="block py-1">Alerta de Precio</a></li>
                    </ul>
              </div>
              <div class="nav-section">
                  <h3 href="nosotros" class="font-bold text-lg">Nosotros</h3>
                  <ul class="list-none p-0">
                      <li><a href="#" class="block py-1">Quienes Somos</a></li>
                      <li><a href="nosotros#map" class="block py-1">Mapa</a></li>
                  </ul>
              </div>
              <div class="nav-section">
                  <h3 class="font-bold text-lg">Soporte</h3>
                  <ul class="list-none p-0">
                      <li><a href="faq" class="block py-1">Preguntas frecuentes</a></li>
                      <li><a href="contacto" class="block py-1">Contacto</a></li>
                  </ul>
              </div>
          </div>
          <!-- Información de contacto -->
          <div class="footer-contact flex flex-wrap justify-between">
              <div class="contact-info">
                    <!-- Dirección -->
                    <div class="contact-item">
                        <a href="https://maps.app.goo.gl/6fQ31ySCJWSButxQ9" target="_blank">
                            <img src="/orionapp/icons/location-white.png" alt="Icono de ubicación" class="icon">
                        </a>
                        <div>
                            <a href="https://maps.app.goo.gl/6fQ31ySCJWSButxQ9" target="_blank"><p>Agustinas 1035 Of 13, Santiago</p></a>
                            <small>Lunes a Viernes 09:00 a 17:00 hrs</small>
                        </div>
                    </div> 
                  <!-- Teléfono -->
                  <div class="contact-item">
                      <img src="/orionapp/icons/phone-white.png" alt="Icono de teléfono" class="icon">
                      <div>
                          <p>+56 9 7184 6048</p>
                      </div>
                  </div>
                  <!-- Correo -->
                  <div class="contact-item">
                      <img src="/orionapp/icons/email-white.png" alt="Icono de correo" class="icon">
                      <div>
                          <p>contacto@cambiosorion.cl</p>
                      </div>
                  </div>
              </div>
          </div>
          <!-- Redes Sociales -->
            <div class="social-media flex gap-4">
                <a href="https://wa.me/+56971846048?text=Hola,%20necesito%20consultar%20con%20un%20ejecutivo." target="_blank"><img src="/orionapp/icons/whatsapp-white.png" alt="WhatsApp" class="icon"></a>
                <a href="https://www.facebook.com/CambiosOrion" target="_blank"><img src="/orionapp/icons/facebook-white.png" alt="Facebook" class="icon"></a>
                <a href="https://www.instagram.com/CambiosOrion.cl" target="_blank"><img src="/orionapp/icons/instagram-white.png" alt="Instagram" class="icon"></a>
                <a href="https://www.tiktok.com/@cambios.orion" target="_blank"><img src="/orionapp/icons/tik-tok-white.png" alt="TikTok" class="icon"></a>
            </div>
      </div>
      <div class="footer-bottom text-xs text-center p-4">
          © 2025 Cambios Orion. Todos los derechos reservados.
      </div>
  </footer>
    <script src="https://cambiosorion.cl/orionapp/node_modules/flowbite/dist/flowbite.min.js"></script>
    <script src="https://cambiosorion.cl/orionapp/public/scripts/header.js"></script>
    <script src="https://cambiosorion.cl/orionapp/public/scripts/index.js"></script>
    <script src="https://cambiosorion.cl/orionapp/public/scripts/conversor.js"></script>
    <script src="https://cambiosorion.cl/orionapp/public/scripts/reservas.js"></script>
    <script src="https://cambiosorion.cl/orionapp/public/scripts/alertas.js"></script>
</body>
</html>
